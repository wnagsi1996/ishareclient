(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3f1f6c02"],{"33b5":function(t,e,o){"use strict";o.d(e,"a",(function(){return n}));o("ac1f"),o("466d");var n=function(){var t=navigator.userAgent.toLowerCase();return"micromessenger"==t.match(/MicroMessenger/i)}},"466d":function(t,e,o){"use strict";var n=o("d784"),r=o("825a"),s=o("50c4"),i=o("1d80"),a=o("8aa5"),c=o("14c3");n("match",1,(function(t,e,o){return[function(e){var o=i(this),n=void 0==e?void 0:e[t];return void 0!==n?n.call(e,o):new RegExp(e)[t](String(o))},function(t){var n=o(e,t,this);if(n.done)return n.value;var i=r(t),u=String(this);if(!i.global)return c(i,u);var d=i.unicode;i.lastIndex=0;var f,h=[],l=0;while(null!==(f=c(i,u))){var p=String(f[0]);h[l]=p,""===p&&(i.lastIndex=a(u,s(i.lastIndex),d)),l++}return 0===l?null:h}]}))},"595b":function(t,e,o){},f4b2:function(t,e,o){"use strict";o("595b")},fbef:function(t,e,o){"use strict";o.r(e);var n,r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"bj"},[o("Header",{ref:"header",attrs:{title:"Groups",shareshow:""}}),Object.keys(t.orderInfo).length>0?o("div",[o("div",{staticClass:"orderimg"},[o("img",{attrs:{src:t.orderInfo.shareimg}})]),o("div",{staticClass:"order-info"},[o("div",{staticClass:"order-info-desc bjWhite"},[o("h3",[t._v(t._s(t.orderInfo.pname))]),t.isHelp?o("span",[t._v("You have helped "+t._s(t.orderInfo.loginname)+" to get free gift and you can click I ALSO WANT IT to get it free.")]):o("span",[t._v(t._s(t._f("state")(t.orderInfo.state)))])]),t.isWeiXin?o("div",{staticClass:"order-info-p"},[o("p",[t._v("Sorry that Wechat offcial rules doesn't allowed us to share this now,please choose facebook friends to help you.")])]):t._e(),t.isHelp?t._e():o("div",[0==t.orderInfo.state?o("van-button",{attrs:{type:"info",block:"",round:""},on:{click:t.onHelp}},[t._v("Help / Get")]):o("van-button",{attrs:{type:"info",block:"",round:""},on:{click:function(e){return t.onProduct()}}},[t._v("I Also Want This")])],1)]),o("div",{staticClass:"joinsocial"},[o("JoinSocial")],1)]):t._e(),o("van-sku",{ref:"getSkuData",attrs:{sku:t.sku,"goods-id":t.orderInfo.pid,goods:t.goods,"reset-selected-sku-on-hide":!0,"stepper-title":"Quantity",quota:1,"show-add-cart-btn":!1,"buy-text":"Help"},on:{"buy-clicked":t.onBuyClicked},scopedSlots:t._u([{key:"sku-header-price",fn:function(e){return[o("div",{staticClass:"van-sku__goods-price"},[o("span",{staticClass:"van-sku__price-symbol"},[t._v("$")]),o("span",{staticClass:"van-sku__price-num"},[t._v(t._s(e.price))])])]}}]),model:{value:t.show,callback:function(e){t.show=e},expression:"show"}})],1)},s=[],i=(o("99af"),o("7db0"),o("4160"),o("b0c0"),o("b64b"),o("159b"),o("5530")),a=o("ade3"),c=(o("e415"),o("2b5e")),u=(o("66b9"),o("b650")),d=o("2f62"),f=o("8622"),h=o("33b5"),l={name:"Groups",components:(n={},Object(a["a"])(n,u["a"].name,u["a"]),Object(a["a"])(n,c["a"].name,c["a"]),Object(a["a"])(n,"JoinSocial",f["default"]),n),computed:Object(i["a"])({},Object(d["c"])(["token"])),data:function(){return{orderno:"",orderInfo:[],show:!0,sku:{},goods:{},intAttrdata:[],isWeiXin:Object(h["a"])(),isHelp:!1}},created:function(){this.orderno=this.$route.params.orderno,this.getPDOrderInfo()},methods:{onBuyClicked:function(t){var e=this,o="";Object.keys(this.sku).length>0?null==t.selectedSkuComb?this.$toast("Please select product specifications"):o=t.selectedSkuComb.id:o=this.detaildata.psku;var n={sku:o,price:t.selectedSkuComb.price/100,num:t.selectedNum};if(3==this.isBtn){var r="0,0,0,0,0,0,0,0,0,0",s=o+"|1|0|"+r+"|0|0|";this.$api.product.CommitPay_PD({zfobj:s,pdorderno:this.orderno}).then((function(t){if(""!=t){switch(t.fsstate){case 0:""==t.fsmes?(e.$toast("Help Success"),e.isHelp=!0):e.$router.push({path:"/groupswait/"+t.fsmes+"?nc="+e.orderInfo.loginname+"pdnum=1"});break;case 1:e.$toast(t.fsmes);break;case 2:e.$router.push({path:"/login"});break}if(0==t.fsstate)return void e.$router.push({path:"/groupswait/"+t.fsmes});if(2==t.fsstate)return void e.$router.push({path:"/login"})}})).catch((function(t){}))}else 2==this.isBtn?this.$router.push({path:"/payment",query:{skus:o,pt:t.selectedNum}}):(this.$store.commit("cart/SET_CART",n),this.$router.push({path:"/payment",query:{skus:"'"+o+"'"}}))},onProduct:function(){this.$router.push({path:"/productdetail/"+this.orderInfo.pname+"/"+this.orderInfo.pid})},getPDOrderInfo:function(){var t=this;this.$api.product.getPDProductOrderInfo({pdorderno:this.orderno}).then((function(e){""!=e&&(t.orderInfo=e,document.title="".concat(e.loginname," can get it free and invite you to get free too.").concat(e.pname))})).catch((function(t){}))},getProductAttr:function(t){var e=this;this.$api.product.getSCProductColumnsSKU({pdi:pdi}).then((function(t){""!=t&&(e.intAttrdata=t,e.skudata(t))})).catch((function(t){}))},onHelp:function(){this.token?(this.show=!0,0==Object.keys(this.sku).length&&this.getProductAttr(this.orderInfo.pid)):this.$router.push({path:"/login",query:{from:"/groups/"+this.orderno}})},skudata:function(t){for(var e,o,n=t.SKUInfos,r=t.attrConfig,s={},a=[],c=0;c<r.length;c++){e=r[c].title,o=r[c].dataIndex;for(var u={k:e,k_s:"s"+(c+1),v:[]},d=function(t){if(void 0==u.v.find((function(e){return e.name==n[t][o]}))){var r=o+"_simg",s=o+"_bimg";u.v.push({id:e+":"+n[t][o],name:n[t][o],imgUrl:n[t][r],previewImgUrl:n[t][s]})}},f=0;f<n.length;f++)d(f);a.push(u)}var h=[];n.forEach((function(t){var e={};r.forEach((function(o){var n=o.dataIndex;a.forEach((function(o){var r=o.k_s;o.v.forEach((function(o){t[n]==o.name&&(e[r]=o.id)}))}))}));var o={id:t.sku,price:100*t.price_pt,stock_num:t.kc};h.push(Object(i["a"])(Object(i["a"])({},e),o))})),s.tree=a,s.list=h,s.price=this.orderInfo.price,this.sku=s}},filters:{state:function(t){var e="";switch(t){case 0:e="Click HELP&GET to help your friend and get it free now.";break;case 1:e="Congratulations!".concat(this.orderInfo.loginname," have got the free gift and you can get it free, too.");break;case 2:e="Click Invite Friends to invite your friends to help you now.";break}return e}}},p=l,v=(o("f4b2"),o("2877")),k=Object(v["a"])(p,r,s,!1,null,"018d8c92",null);e["default"]=k.exports}}]);